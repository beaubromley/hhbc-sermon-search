(function(){var e={852:function(e,t,s){"use strict";e.exports=s.p+"img/download.fb71e3c6.png"},3554:function(e,t,s){"use strict";var a=s(5130),o=s(6768),l=s(4232),i=s(852);const n={id:"app"},r={key:0,src:i,alt:"HHBC Sermon Search",class:"logo"},c={key:1},d={key:0,class:"global-loading"},u={key:1},h={class:"tabs"},k=["onClick"];function b(e,t,s,a,i,b){const p=(0,o.g2)("SearchView"),v=(0,o.g2)("VideoListView"),f=(0,o.g2)("BibleHeatMapView");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("header",null,[i.logoExists?((0,o.uX)(),(0,o.CE)("img",r)):((0,o.uX)(),(0,o.CE)("h1",c,"HHBC Sermon Search"))]),i.loadingDb?((0,o.uX)(),(0,o.CE)("div",d,[t[0]||(t[0]=(0,o.Lk)("div",{class:"loading-spinner"},null,-1)),(0,o.Lk)("p",null,"Loading database... "+(0,l.v_)(i.loadingProgress),1),t[1]||(t[1]=(0,o.Lk)("p",{class:"loading-hint"},"This may take a minute on first load (142MB compressed)",-1))])):((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("nav",h,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.tabs,e=>((0,o.uX)(),(0,o.CE)("button",{key:e.id,class:(0,l.C4)(["tab",{active:i.currentTab===e.id}]),onClick:t=>i.currentTab=e.id},(0,l.v_)(e.name),11,k))),128))]),(0,o.Lk)("main",null,["search"===i.currentTab?((0,o.uX)(),(0,o.Wv)(p,{key:0,db:i.db,speakers:i.speakers},null,8,["db","speakers"])):(0,o.Q3)("",!0),"videos"===i.currentTab?((0,o.uX)(),(0,o.Wv)(v,{key:1,db:i.db,speakers:i.speakers},null,8,["db","speakers"])):(0,o.Q3)("",!0),"bible"===i.currentTab?((0,o.uX)(),(0,o.Wv)(f,{key:2,db:i.db,speakers:i.speakers},null,8,["db","speakers"])):(0,o.Q3)("",!0)])]))])}s(4114),s(6573),s(8100),s(7936),s(9577),s(1549),s(9797),s(9631),s(5623);const p={class:"search-view"},v={class:"search-box"},f=["disabled"],g={key:0,class:"loading"},m={key:1,class:"results"},C={class:"results-summary"},L={class:"stats"},y={class:"results-tabs"},E={class:"results-table"},_={class:"title-cell"},T={class:"match-text"},S=["href"],w={key:2,class:"no-results"},X={key:3,class:"instructions"};function D(e,t,s,i,n,r){return(0,o.uX)(),(0,o.CE)("div",p,[t[7]||(t[7]=(0,o.Lk)("h2",null,"Sermon Search",-1)),(0,o.Lk)("div",v,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchQuery=e),onInput:t[1]||(t[1]=(...e)=>r.handleSearch&&r.handleSearch(...e)),type:"text",placeholder:"Search sermons by title or transcript content...",class:"search-input",disabled:!s.db},null,40,f),[[a.Jo,n.searchQuery]])]),n.loading?((0,o.uX)(),(0,o.CE)("div",g," Searching... ")):n.results.length>0?((0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("div",C,[(0,o.Lk)("h3",null,"Found "+(0,l.v_)(n.results.length)+" matches",1),(0,o.Lk)("div",L,[(0,o.Lk)("span",null,"Title Matches: "+(0,l.v_)(r.titleMatches),1),(0,o.Lk)("span",null,"Transcript Matches: "+(0,l.v_)(r.transcriptMatches),1)])]),(0,o.Lk)("div",y,[(0,o.Lk)("button",{class:(0,l.C4)(["result-tab",{active:"all"===n.resultTab}]),onClick:t[2]||(t[2]=e=>n.resultTab="all")}," All Results ("+(0,l.v_)(n.results.length)+") ",3),(0,o.Lk)("button",{class:(0,l.C4)(["result-tab",{active:"titles"===n.resultTab}]),onClick:t[3]||(t[3]=e=>n.resultTab="titles")}," Title Matches ("+(0,l.v_)(r.titleMatches)+") ",3),(0,o.Lk)("button",{class:(0,l.C4)(["result-tab",{active:"transcripts"===n.resultTab}]),onClick:t[4]||(t[4]=e=>n.resultTab="transcripts")}," Transcript Matches ("+(0,l.v_)(r.transcriptMatches)+") ",3)]),(0,o.Lk)("div",E,[(0,o.Lk)("table",null,[t[5]||(t[5]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Type"),(0,o.Lk)("th",null,"Date"),(0,o.Lk)("th",null,"Speaker"),(0,o.Lk)("th",null,"Video Title"),(0,o.Lk)("th",null,"Time"),(0,o.Lk)("th",null,"Match"),(0,o.Lk)("th",null,"Watch")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.filteredResults,(e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,l.C4)("Title"===e.type?"badge-title":"badge-transcript")},(0,l.v_)(e.type),3)]),(0,o.Lk)("td",null,(0,l.v_)(e.date),1),(0,o.Lk)("td",null,(0,l.v_)(e.speaker),1),(0,o.Lk)("td",_,(0,l.v_)(e.title),1),(0,o.Lk)("td",null,(0,l.v_)(e.timestamp),1),(0,o.Lk)("td",T,(0,l.v_)(e.match),1),(0,o.Lk)("td",null,[(0,o.Lk)("a",{href:e.url,target:"_blank",class:"watch-link",title:"Watch video"},"â–¶",8,S)])]))),128))])])])])):n.searchQuery.length>=2?((0,o.uX)(),(0,o.CE)("div",w,' No matches found for "'+(0,l.v_)(n.searchQuery)+'" ',1)):s.db?((0,o.uX)(),(0,o.CE)("div",X,[...t[6]||(t[6]=[(0,o.Lk)("p",null,"ðŸ” Enter at least 2 characters to search",-1),(0,o.Lk)("p",{class:"hint"},'Try searching for topics like "faith", "prayer", "salvation", or Bible references',-1)])])):(0,o.Q3)("",!0)])}s(8111),s(2489),s(7588);var B={name:"SearchView",props:{db:{type:Object,required:!0},speakers:{type:Object,required:!0}},data(){return{searchQuery:"",results:[],loading:!1,resultTab:"all",searchTimeout:null}},computed:{titleMatches(){return this.results.filter(e=>"Title"===e.type).length},transcriptMatches(){return this.results.filter(e=>"Transcript"===e.type).length},filteredResults(){return"titles"===this.resultTab?this.results.filter(e=>"Title"===e.type):"transcripts"===this.resultTab?this.results.filter(e=>"Transcript"===e.type):this.results}},methods:{handleSearch(){this.searchQuery.length<2?this.results=[]:(this.loading=!0,clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.performSearch(),this.loading=!1},300))},performSearch(){if(!this.db)return void console.error("Database not ready");console.log(`Searching for: "${this.searchQuery}"`);const e=[],t=this.searchQuery.trim();try{const s="\n          SELECT video_id, title, date_published, url\n          FROM videos\n          WHERE title LIKE ?\n          LIMIT 50\n        ",a=this.db.exec(s,[`%${t}%`]);if(a.length>0){const s=a[0].values;s.forEach(s=>{const[a,o,l,i]=s;e.push({type:"Title",date:l.substring(0,10),speaker:this.speakers[a]||"Unknown",title:o,timestamp:"00:00:00",match:`Title contains: "${t}"`,url:i,score:10})})}console.log(`Found ${e.length} title matches`);const o="\n          SELECT ts.video_id, v.title, v.date_published, ts.start_time, ts.text, ts.vimeo_url\n          FROM transcript_segments ts\n          JOIN videos v ON ts.video_id = v.video_id\n          WHERE ts.text LIKE ?\n          ORDER BY ts.start_time\n          LIMIT 100\n        ",l=this.db.exec(o,[`%${t}%`]);if(l.length>0){const t=l[0].values;t.forEach(t=>{const[s,a,o,l,i,n]=t;e.push({type:"Transcript",date:o.substring(0,10),speaker:this.speakers[s]||"Unknown",title:a,timestamp:this.formatTimestamp(l),match:i.substring(0,200)+(i.length>200?"...":""),url:n,score:1})})}console.log(`Found ${l.length>0?l[0].values.length:0} transcript matches`),this.results=e,console.log(`Total results: ${e.length}`)}catch(s){console.error("Search error:",s),alert(`Search failed: ${s.message}`)}},formatTimestamp(e){const t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}}},F=s(1241);const M=(0,F.A)(B,[["render",D],["__scopeId","data-v-3e6117b9"]]);var I=M;const O={class:"video-list-view"},P={class:"filters"},R={class:"filter-row"},x={class:"filter-group"},J=["value"],V={class:"filter-group"},$=["value"],A={class:"filter-group"},H=["value"],N={class:"filter-group"},K=["value"],j={class:"results-summary"},q={key:0,class:"loading"},Q={key:1,class:"video-table"},Y={class:"title-cell"},U=["href"],G={key:0,class:"pagination"},W=["disabled"],z=["disabled"],Z={key:2,class:"no-results"};function ee(e,t,s,i,n,r){return(0,o.uX)(),(0,o.CE)("div",O,[t[24]||(t[24]=(0,o.Lk)("h2",null,"Video List",-1)),(0,o.Lk)("div",P,[(0,o.Lk)("div",R,[(0,o.Lk)("div",x,[t[15]||(t[15]=(0,o.Lk)("label",null,"Speaker",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.filters.speaker=e),onChange:t[1]||(t[1]=(...e)=>r.applyFilters&&r.applyFilters(...e))},[t[14]||(t[14]=(0,o.Lk)("option",{value:""},"All Speakers",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.uniqueSpeakers,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,l.v_)(e),9,J))),128))],544),[[a.u1,n.filters.speaker]])]),(0,o.Lk)("div",V,[t[17]||(t[17]=(0,o.Lk)("label",null,"Year",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.filters.year=e),onChange:t[3]||(t[3]=(...e)=>r.applyFilters&&r.applyFilters(...e))},[t[16]||(t[16]=(0,o.Lk)("option",{value:""},"All Years",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.uniqueYears,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,l.v_)(e),9,$))),128))],544),[[a.u1,n.filters.year]])]),(0,o.Lk)("div",A,[t[19]||(t[19]=(0,o.Lk)("label",null,"Bible Book",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.filters.book=e),onChange:t[5]||(t[5]=(...e)=>r.applyFilters&&r.applyFilters(...e))},[t[18]||(t[18]=(0,o.Lk)("option",{value:""},"All Books",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.uniqueBooks,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,l.v_)(e),9,H))),128))],544),[[a.u1,n.filters.book]])]),(0,o.Lk)("div",N,[t[21]||(t[21]=(0,o.Lk)("label",null,"Topic",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.filters.topic=e),onChange:t[7]||(t[7]=(...e)=>r.applyFilters&&r.applyFilters(...e))},[t[20]||(t[20]=(0,o.Lk)("option",{value:""},"All Topics",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.uniqueTopics,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,l.v_)(e),9,K))),128))],544),[[a.u1,n.filters.topic]])]),(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>r.clearFilters&&r.clearFilters(...e)),class:"clear-btn"},"Clear Filters")])]),(0,o.Lk)("div",j,[(0,o.Lk)("h3",null,(0,l.v_)(n.filteredVideos.length)+" sermons",1)]),n.loading?((0,o.uX)(),(0,o.CE)("div",q," Loading videos... ")):n.filteredVideos.length>0?((0,o.uX)(),(0,o.CE)("div",Q,[(0,o.Lk)("table",null,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{onClick:t[9]||(t[9]=e=>r.sortBy("date")),class:"sortable"}," Date "+(0,l.v_)("date"===n.sortColumn?"asc"===n.sortDirection?"â–²":"â–¼":""),1),(0,o.Lk)("th",{onClick:t[10]||(t[10]=e=>r.sortBy("speaker")),class:"sortable"}," Speaker "+(0,l.v_)("speaker"===n.sortColumn?"asc"===n.sortDirection?"â–²":"â–¼":""),1),(0,o.Lk)("th",{onClick:t[11]||(t[11]=e=>r.sortBy("title")),class:"sortable"}," Title "+(0,l.v_)("title"===n.sortColumn?"asc"===n.sortDirection?"â–²":"â–¼":""),1),t[22]||(t[22]=(0,o.Lk)("th",null,"Duration",-1)),t[23]||(t[23]=(0,o.Lk)("th",null,"Watch",-1))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.paginatedVideos,e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,(0,l.v_)(e.date),1),(0,o.Lk)("td",null,(0,l.v_)(e.speaker),1),(0,o.Lk)("td",Y,(0,l.v_)(e.title),1),(0,o.Lk)("td",null,(0,l.v_)(e.duration),1),(0,o.Lk)("td",null,[(0,o.Lk)("a",{href:e.url,target:"_blank",class:"watch-link",title:"Watch video"},"â–¶",8,U)])]))),128))])]),r.totalPages>1?((0,o.uX)(),(0,o.CE)("div",G,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=e=>n.currentPage--),disabled:1===n.currentPage},"Previous",8,W),(0,o.Lk)("span",null,"Page "+(0,l.v_)(n.currentPage)+" of "+(0,l.v_)(r.totalPages),1),(0,o.Lk)("button",{onClick:t[13]||(t[13]=e=>n.currentPage++),disabled:n.currentPage===r.totalPages},"Next",8,z)])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",Z," No videos match the selected filters "))])}s(1701),s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);var te={name:"VideoListView",props:{db:{type:Object,required:!0},speakers:{type:Object,required:!0}},data(){return{loading:!0,videos:[],bibleReferences:[],theologicalTopics:[],filters:{speaker:"",year:"",book:"",topic:""},filteredVideos:[],sortColumn:"date",sortDirection:"desc",currentPage:1,perPage:50}},computed:{uniqueSpeakers(){const e=[...new Set(this.videos.map(e=>e.speaker))].filter(e=>e);return e.sort()},uniqueYears(){const e=[...new Set(this.videos.map(e=>new Date(e.date).getFullYear()))];return e.sort((e,t)=>t-e)},uniqueBooks(){const e=[...new Set(this.bibleReferences.map(e=>e.book))];return e.sort()},uniqueTopics(){const e=[...new Set(this.theologicalTopics.map(e=>e.topic))];return e.sort()},totalPages(){return Math.ceil(this.filteredVideos.length/this.perPage)},paginatedVideos(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredVideos.slice(e,t)}},async mounted(){await this.loadVideos()},methods:{async loadVideos(){this.loading=!0;try{const e="SELECT video_id, title, date_published, duration, url FROM videos ORDER BY date_published DESC",t=this.db.exec(e);t.length>0&&(this.videos=t[0].values.map(e=>{const[t,s,a,o,l]=e;return{id:t,title:s,date:a.substring(0,10),duration:this.formatDuration(o),url:l,speaker:this.speakers[t]||"Unknown"}}));const s="SELECT DISTINCT video_id, book FROM bible_references",a=this.db.exec(s);a.length>0&&(this.bibleReferences=a[0].values.map(e=>({video_id:e[0],book:e[1]})));const o="SELECT DISTINCT video_id, topic FROM theological_topics",l=this.db.exec(o);l.length>0&&(this.theologicalTopics=l[0].values.map(e=>({video_id:e[0],topic:e[1]}))),this.filteredVideos=[...this.videos],this.loading=!1}catch(e){console.error("Error loading videos:",e),this.loading=!1}},applyFilters(){let e=[...this.videos];if(this.filters.speaker&&(e=e.filter(e=>e.speaker===this.filters.speaker)),this.filters.year&&(e=e.filter(e=>new Date(e.date).getFullYear()===parseInt(this.filters.year))),this.filters.book){const t=this.bibleReferences.filter(e=>e.book===this.filters.book).map(e=>e.video_id);e=e.filter(e=>t.includes(e.id))}if(this.filters.topic){const t=this.theologicalTopics.filter(e=>e.topic===this.filters.topic).map(e=>e.video_id);e=e.filter(e=>t.includes(e.id))}this.filteredVideos=e,this.sortVideos(),this.currentPage=1},clearFilters(){this.filters={speaker:"",year:"",book:"",topic:""},this.applyFilters()},sortBy(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="desc"),this.sortVideos()},sortVideos(){this.filteredVideos.sort((e,t)=>{let s=e[this.sortColumn],a=t[this.sortColumn];return"date"===this.sortColumn&&(s=new Date(s),a=new Date(a)),s<a?"asc"===this.sortDirection?-1:1:s>a?"asc"===this.sortDirection?1:-1:0})},formatDuration(e){if(!e)return"--";const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?`${t}h ${s}m`:`${s}m`}}};const se=(0,F.A)(te,[["render",ee],["__scopeId","data-v-1ad89cbc"]]);var ae=se;s(116);const oe={class:"bible-heatmap-view"},le={class:"filters"},ie={class:"filter-row"},ne={class:"filter-group"},re=["value"],ce={class:"filter-group"},de=["value"],ue={class:"filter-group"},he={key:0,class:"loading"},ke={key:1},be={key:0,class:"testament-section"},pe={class:"heatmap-row"},ve=["title","onClick"],fe={class:"book-abbrev"},ge={class:"book-count"},me={class:"heatmap-row"},Ce=["title","onClick"],Le={class:"book-abbrev"},ye={class:"book-count"},Ee={class:"heatmap-row"},_e=["title","onClick"],Te={class:"book-abbrev"},Se={class:"book-count"},we={key:1,class:"testament-section"},Xe={class:"heatmap-row"},De=["title","onClick"],Be={class:"book-abbrev"},Fe={class:"book-count"},Me={class:"heatmap-row"},Ie=["title","onClick"],Oe={class:"book-abbrev"},Pe={class:"book-count"},Re={class:"heatmap-row"},xe=["title","onClick"],Je={class:"book-abbrev"},Ve={class:"book-count"},$e={key:2,class:"book-details"},Ae={class:"details-header"},He={class:"details-content"},Ne={class:"details-summary"},Ke={class:"chapter-list"},je=["onClick"],qe={class:"chapter-number"},Qe={class:"chapter-right"},Ye={class:"chapter-count"},Ue={class:"chapter-toggle"},Ge={key:0,class:"chapter-sermons"},We=["href"],ze={class:"sermon-date"},Ze={class:"sermon-list"},et=["href"],tt={class:"sermon-date"},st={key:2,class:"no-results"};function at(e,t,s,i,n,r){return(0,o.uX)(),(0,o.CE)("div",oe,[t[20]||(t[20]=(0,o.Lk)("h2",null,"Bible Heat Map",-1)),(0,o.Lk)("div",le,[(0,o.Lk)("div",ie,[(0,o.Lk)("div",ne,[t[9]||(t[9]=(0,o.Lk)("label",null,"Speaker",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.filters.speaker=e),onChange:t[1]||(t[1]=(...e)=>r.loadData&&r.loadData(...e))},[t[8]||(t[8]=(0,o.Lk)("option",{value:""},"All Speakers",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.uniqueSpeakers,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,l.v_)(e),9,re))),128))],544),[[a.u1,n.filters.speaker]])]),(0,o.Lk)("div",ce,[t[11]||(t[11]=(0,o.Lk)("label",null,"Year",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.filters.year=e),onChange:t[3]||(t[3]=(...e)=>r.loadData&&r.loadData(...e))},[t[10]||(t[10]=(0,o.Lk)("option",{value:""},"All Years",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.uniqueYears,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,l.v_)(e),9,de))),128))],544),[[a.u1,n.filters.year]])]),(0,o.Lk)("div",ue,[t[13]||(t[13]=(0,o.Lk)("label",null,"Testament",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.filters.testament=e),onChange:t[5]||(t[5]=(...e)=>r.loadData&&r.loadData(...e))},[...t[12]||(t[12]=[(0,o.Lk)("option",{value:"both"},"Both",-1),(0,o.Lk)("option",{value:"old"},"Old Testament",-1),(0,o.Lk)("option",{value:"new"},"New Testament",-1)])],544),[[a.u1,n.filters.testament]])]),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.clearFilters&&r.clearFilters(...e)),class:"clear-btn"},"Clear Filters")])]),n.loading?((0,o.uX)(),(0,o.CE)("div",he," Loading Bible references... ")):n.bookCounts.length>0?((0,o.uX)(),(0,o.CE)("div",ke,["both"===n.filters.testament||"old"===n.filters.testament?((0,o.uX)(),(0,o.CE)("div",be,[t[14]||(t[14]=(0,o.Lk)("h3",null,"Old Testament",-1)),(0,o.Lk)("div",pe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.oldTestamentBooks.slice(0,13),e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:(0,l.C4)(["book-cell",r.getHeatClass(n.bookCounts.find(t=>t.book===e)?.count||0)]),title:`${e}: ${n.bookCounts.find(t=>t.book===e)?.count||0} references`,onClick:t=>r.selectBook(e)},[(0,o.Lk)("div",fe,(0,l.v_)(r.getAbbreviation(e)),1),(0,o.Lk)("div",ge,(0,l.v_)(n.bookCounts.find(t=>t.book===e)?.count||0),1)],10,ve))),128))]),(0,o.Lk)("div",me,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.oldTestamentBooks.slice(13,26),e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:(0,l.C4)(["book-cell",r.getHeatClass(n.bookCounts.find(t=>t.book===e)?.count||0)]),title:`${e}: ${n.bookCounts.find(t=>t.book===e)?.count||0} references`,onClick:t=>r.selectBook(e)},[(0,o.Lk)("div",Le,(0,l.v_)(r.getAbbreviation(e)),1),(0,o.Lk)("div",ye,(0,l.v_)(n.bookCounts.find(t=>t.book===e)?.count||0),1)],10,Ce))),128))]),(0,o.Lk)("div",Ee,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.oldTestamentBooks.slice(26,39),e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:(0,l.C4)(["book-cell",r.getHeatClass(n.bookCounts.find(t=>t.book===e)?.count||0)]),title:`${e}: ${n.bookCounts.find(t=>t.book===e)?.count||0} references`,onClick:t=>r.selectBook(e)},[(0,o.Lk)("div",Te,(0,l.v_)(r.getAbbreviation(e)),1),(0,o.Lk)("div",Se,(0,l.v_)(n.bookCounts.find(t=>t.book===e)?.count||0),1)],10,_e))),128))])])):(0,o.Q3)("",!0),"both"===n.filters.testament||"new"===n.filters.testament?((0,o.uX)(),(0,o.CE)("div",we,[t[15]||(t[15]=(0,o.Lk)("h3",null,"New Testament",-1)),(0,o.Lk)("div",Xe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.newTestamentBooks.slice(0,9),e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:(0,l.C4)(["book-cell",r.getHeatClass(n.bookCounts.find(t=>t.book===e)?.count||0)]),title:`${e}: ${n.bookCounts.find(t=>t.book===e)?.count||0} references`,onClick:t=>r.selectBook(e)},[(0,o.Lk)("div",Be,(0,l.v_)(r.getAbbreviation(e)),1),(0,o.Lk)("div",Fe,(0,l.v_)(n.bookCounts.find(t=>t.book===e)?.count||0),1)],10,De))),128))]),(0,o.Lk)("div",Me,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.newTestamentBooks.slice(9,18),e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:(0,l.C4)(["book-cell",r.getHeatClass(n.bookCounts.find(t=>t.book===e)?.count||0)]),title:`${e}: ${n.bookCounts.find(t=>t.book===e)?.count||0} references`,onClick:t=>r.selectBook(e)},[(0,o.Lk)("div",Oe,(0,l.v_)(r.getAbbreviation(e)),1),(0,o.Lk)("div",Pe,(0,l.v_)(n.bookCounts.find(t=>t.book===e)?.count||0),1)],10,Ie))),128))]),(0,o.Lk)("div",Re,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.newTestamentBooks.slice(18,27),e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:(0,l.C4)(["book-cell",r.getHeatClass(n.bookCounts.find(t=>t.book===e)?.count||0)]),title:`${e}: ${n.bookCounts.find(t=>t.book===e)?.count||0} references`,onClick:t=>r.selectBook(e)},[(0,o.Lk)("div",Je,(0,l.v_)(r.getAbbreviation(e)),1),(0,o.Lk)("div",Ve,(0,l.v_)(n.bookCounts.find(t=>t.book===e)?.count||0),1)],10,xe))),128))])])):(0,o.Q3)("",!0),t[19]||(t[19]=(0,o.Fv)('<div class="legend" data-v-4fbb8e0c><h4 data-v-4fbb8e0c>Reference Count</h4><div class="legend-items" data-v-4fbb8e0c><div class="legend-item" data-v-4fbb8e0c><div class="legend-box heat-0" data-v-4fbb8e0c></div><span data-v-4fbb8e0c>0</span></div><div class="legend-item" data-v-4fbb8e0c><div class="legend-box heat-1" data-v-4fbb8e0c></div><span data-v-4fbb8e0c>1-10</span></div><div class="legend-item" data-v-4fbb8e0c><div class="legend-box heat-2" data-v-4fbb8e0c></div><span data-v-4fbb8e0c>11-50</span></div><div class="legend-item" data-v-4fbb8e0c><div class="legend-box heat-3" data-v-4fbb8e0c></div><span data-v-4fbb8e0c>51-150</span></div><div class="legend-item" data-v-4fbb8e0c><div class="legend-box heat-4" data-v-4fbb8e0c></div><span data-v-4fbb8e0c>151-500</span></div><div class="legend-item" data-v-4fbb8e0c><div class="legend-box heat-5" data-v-4fbb8e0c></div><span data-v-4fbb8e0c>501+</span></div></div></div>',1)),n.selectedBook?((0,o.uX)(),(0,o.CE)("div",$e,[(0,o.Lk)("div",Ae,[(0,o.Lk)("h3",null,(0,l.v_)(n.selectedBook),1),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>n.selectedBook=null),class:"close-btn"},"âœ•")]),(0,o.Lk)("div",He,[(0,o.Lk)("p",Ne,[(0,o.Lk)("strong",null,(0,l.v_)(r.getTotalReferences(n.selectedBook)),1),t[16]||(t[16]=(0,o.eW)(" total references ",-1))]),t[17]||(t[17]=(0,o.Lk)("h4",null,"Chapter Breakdown",-1)),(0,o.Lk)("div",Ke,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.getChapterBreakdown(n.selectedBook),e=>((0,o.uX)(),(0,o.CE)("div",{key:e.chapter,class:"chapter-item"},[(0,o.Lk)("div",{class:"chapter-header",onClick:t=>r.toggleChapter(e.chapter)},[(0,o.Lk)("span",qe,"Chapter "+(0,l.v_)(e.chapter||"General"),1),(0,o.Lk)("div",Qe,[(0,o.Lk)("span",Ye,(0,l.v_)(e.count)+" references",1),(0,o.Lk)("span",Ue,(0,l.v_)(r.isChapterExpanded(e.chapter)?"â–¼":"â–¶"),1)])],8,je),r.isChapterExpanded(e.chapter)?((0,o.uX)(),(0,o.CE)("div",Ge,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.getChapterSermons(n.selectedBook,e.chapter),e=>((0,o.uX)(),(0,o.CE)("div",{key:e.url,class:"chapter-sermon-item"},[(0,o.Lk)("a",{href:e.url,target:"_blank"},(0,l.v_)(e.title),9,We),(0,o.Lk)("span",ze,(0,l.v_)(e.date),1)]))),128))])):(0,o.Q3)("",!0)]))),128))]),t[18]||(t[18]=(0,o.Lk)("h4",null,"Recent Sermons (Top 10)",-1)),(0,o.Lk)("div",Ze,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.getSermons(n.selectedBook),e=>((0,o.uX)(),(0,o.CE)("div",{key:e.url,class:"sermon-item"},[(0,o.Lk)("a",{href:e.url,target:"_blank"},(0,l.v_)(e.title),9,et),(0,o.Lk)("span",tt,(0,l.v_)(e.date),1)]))),128))])])])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",st," No Bible references found "))])}s(3579);var ot={name:"BibleHeatMapView",props:{db:{type:Object,required:!0},speakers:{type:Object,required:!0}},data(){return{loading:!0,filters:{speaker:"",year:"",testament:"both"},bookCounts:[],allReferences:[],selectedBook:null,expandedChapters:[],uniqueSpeakers:[],uniqueYears:[],oldTestamentBooks:["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi"],newTestamentBooks:["Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"],bookAbbreviations:{Genesis:"Gen",Exodus:"Exod",Leviticus:"Lev",Numbers:"Num",Deuteronomy:"Deut",Joshua:"Josh",Judges:"Judg",Ruth:"Ruth","1 Samuel":"1Sam","2 Samuel":"2Sam","1 Kings":"1Kgs","2 Kings":"2Kgs","1 Chronicles":"1Chr","2 Chronicles":"2Chr",Ezra:"Ezra",Nehemiah:"Neh",Esther:"Esth",Job:"Job",Psalms:"Ps",Proverbs:"Prov",Ecclesiastes:"Eccl","Song of Solomon":"Song",Isaiah:"Isa",Jeremiah:"Jer",Lamentations:"Lam",Ezekiel:"Ezek",Daniel:"Dan",Hosea:"Hos",Joel:"Joel",Amos:"Amos",Obadiah:"Obad",Jonah:"Jonah",Micah:"Mic",Nahum:"Nah",Habakkuk:"Hab",Zephaniah:"Zeph",Haggai:"Hag",Zechariah:"Zech",Malachi:"Mal",Matthew:"Matt",Mark:"Mark",Luke:"Luke",John:"John",Acts:"Acts",Romans:"Rom","1 Corinthians":"1Cor","2 Corinthians":"2Cor",Galatians:"Gal",Ephesians:"Eph",Philippians:"Phil",Colossians:"Col","1 Thessalonians":"1Thess","2 Thessalonians":"2Thess","1 Timothy":"1Tim","2 Timothy":"2Tim",Titus:"Titus",Philemon:"Phlm",Hebrews:"Heb",James:"Jas","1 Peter":"1Pet","2 Peter":"2Pet","1 John":"1John","2 John":"2John","3 John":"3John",Jude:"Jude",Revelation:"Rev"}}},async mounted(){await this.loadFilters(),await this.loadData()},methods:{async loadFilters(){try{const e="\n          SELECT DISTINCT v.video_id\n          FROM videos v\n          JOIN bible_references br ON v.video_id = br.video_id\n        ",t=this.db.exec(e);if(t.length>0){const e=t[0].values.map(e=>e[0]),s=new Set;e.forEach(e=>{const t=this.speakers[e];t&&"Unknown"!==t&&s.add(t)}),this.uniqueSpeakers=Array.from(s).sort()}const s="\n          SELECT DISTINCT strftime('%Y', v.date_published) as year\n          FROM videos v\n          JOIN bible_references br ON v.video_id = br.video_id\n          ORDER BY year DESC\n        ",a=this.db.exec(s);a.length>0&&(this.uniqueYears=a[0].values.map(e=>e[0]))}catch(e){console.error("Error loading filters:",e)}},async loadData(){this.loading=!0;try{let e="\n          SELECT br.book, br.video_id, br.chapter, v.title, v.date_published, v.url\n          FROM bible_references br\n          JOIN videos v ON br.video_id = v.video_id\n          WHERE 1=1\n        ";const t=[];if(this.filters.speaker){const s=Object.keys(this.speakers).filter(e=>this.speakers[e]===this.filters.speaker);s.length>0&&(e+=` AND br.video_id IN (${s.map(()=>"?").join(",")})`,t.push(...s))}this.filters.year&&(e+=" AND strftime('%Y', v.date_published) = ?",t.push(this.filters.year));const s=this.db.exec(e,t);if(s.length>0){this.allReferences=s[0].values.map(e=>({book:e[0],video_id:e[1],chapter:e[2],title:e[3],date:e[4],url:e[5]}));const e={};this.allReferences.forEach(t=>{e[t.book]=(e[t.book]||0)+1}),this.bookCounts=Object.entries(e).map(([e,t])=>({book:e,count:t}))}else this.bookCounts=[],this.allReferences=[];this.loading=!1}catch(e){console.error("Error loading Bible references:",e),this.loading=!1}},clearFilters(){this.filters={speaker:"",year:"",testament:"both"},this.loadData()},getAbbreviation(e){return this.bookAbbreviations[e]||e.substring(0,4)},getHeatClass(e){return 0===e?"heat-0":e<=10?"heat-1":e<=50?"heat-2":e<=150?"heat-3":e<=500?"heat-4":"heat-5"},selectBook(e){this.selectedBook=e,this.expandedChapters=[],console.log("Selected book:",e)},toggleChapter(e){console.log("Toggling chapter:",e);const t=this.expandedChapters.indexOf(e);t>-1?this.expandedChapters.splice(t,1):this.expandedChapters.push(e),console.log("Expanded chapters:",this.expandedChapters)},getTotalReferences(e){return this.allReferences.filter(t=>t.book===e).length},getChapterBreakdown(e){const t=this.allReferences.filter(t=>t.book===e),s={};return t.forEach(e=>{const t=e.chapter?String(e.chapter):"General";s[t]=(s[t]||0)+1}),Object.entries(s).map(([e,t])=>({chapter:e,count:t})).sort((e,t)=>"General"===e.chapter?1:"General"===t.chapter?-1:parseInt(e.chapter)-parseInt(t.chapter))},getChapterSermons(e,t){const s=this.allReferences.filter(s=>"General"===t?s.book===e&&!s.chapter:s.book===e&&String(s.chapter)===String(t)),a={};return s.forEach(e=>{a[e.video_id]||(a[e.video_id]={title:e.title,date:e.date.substring(0,10),url:e.url})}),Object.values(a).sort((e,t)=>t.date.localeCompare(e.date))},isChapterExpanded(e){return this.expandedChapters.some(t=>String(t)===String(e))},getSermons(e){const t=this.allReferences.filter(t=>t.book===e),s={};return t.forEach(e=>{s[e.video_id]||(s[e.video_id]={title:e.title,date:e.date.substring(0,10),url:e.url})}),Object.values(s).sort((e,t)=>t.date.localeCompare(e.date)).slice(0,10)}}};const lt=(0,F.A)(ot,[["render",at],["__scopeId","data-v-4fbb8e0c"]]);var it=lt,nt=s(2365),rt=s.n(nt),ct=s(2188),dt={name:"App",components:{SearchView:I,VideoListView:ae,BibleHeatMapView:it},data(){return{currentTab:"search",logoExists:!1,tabs:[{id:"search",name:"Home"},{id:"videos",name:"Video List"},{id:"bible",name:"Bible Heat Map"}],loadingDb:!0,loadingProgress:"",db:null,speakers:{}}},async mounted(){this.checkLogo(),await this.loadDatabase()},beforeUnmount(){this.db&&this.db.close()},methods:{checkLogo(){const e=new Image;e.onload=()=>{this.logoExists=!0},e.onerror=()=>{this.logoExists=!1},e.src=s(852)},async loadDatabase(){try{this.loadingProgress="Initializing SQL.js...";const e=await rt()({locateFile:e=>`https://sql.js.org/dist/${e}`});this.loadingProgress="Downloading compressed database (142MB)...",console.log("Downloading compressed database...");const t="/hhbc-sermon-search/",s=await fetch(`${t}data/transcripts.db.gz`);if(!s.ok)throw new Error(`Failed to load database: ${s.status}`);const a=s.headers.get("content-length"),o=parseInt(a,10);let l=0;const i=s.body.getReader(),n=[];let r=!1;while(!r){const e=await i.read();if(r=e.done,e.value&&(n.push(e.value),l+=e.value.length,o)){const e=Math.round(l/o*100);this.loadingProgress=`Downloading: ${e}% (${Math.round(l/1024/1024)}MB / ${Math.round(o/1024/1024)}MB)`}}this.loadingProgress="Decompressing database...",console.log("Decompressing database...");const c=new Uint8Array(l);let d=0;for(const h of n)c.set(h,d),d+=h.length;const u=ct.Ay.ungzip(c);console.log(`Decompressed to ${u.length/1024/1024} MB`),this.loadingProgress="Loading database into memory...",this.db=new e.Database(u),console.log("âœ… Database loaded successfully"),await this.loadSpeakers(),this.loadingDb=!1}catch(e){console.error("Error loading database:",e),this.loadingProgress=`Error: ${e.message}`,alert(`Failed to load database: ${e.message}`)}},async loadSpeakers(){try{const e="/hhbc-sermon-search/",t=await fetch(`${e}data/speakers.json`);t.ok&&(this.speakers=await t.json(),console.log(`âœ… Loaded ${Object.keys(this.speakers).length} speaker mappings`))}catch(e){console.warn("Could not load speakers.json:",e)}}}};const ut=(0,F.A)(dt,[["render",b]]);var ht=ut;(0,a.Ef)(ht).mount("#app")},6490:function(){},7920:function(){},9234:function(){}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,s),l.loaded=!0,l.exports}s.m=e,function(){var e=[];s.O=function(t,a,o,l){if(!a){var i=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],l=e[d][2];for(var n=!0,r=0;r<a.length;r++)(!1&l||i>=l)&&Object.keys(s.O).every(function(e){return s.O[e](a[r])})?a.splice(r--,1):(n=!1,l<i&&(i=l));if(n){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,o,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/hhbc-sermon-search/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,l,i=a[0],n=a[1],r=a[2],c=0;if(i.some(function(t){return 0!==e[t]})){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(r)var d=r(s)}for(t&&t(a);c<i.length;c++)l=i[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(3554)});a=s.O(a)})();
//# sourceMappingURL=app.1770f85d.js.map